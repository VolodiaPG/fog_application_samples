global:
  scrape_interval: {{ prometheus_scrape_interval }}
  scrape_timeout: {{ prometheus_scrape_timeout }}
  evaluation_interval: {{ prometheus_eval_interval }}

scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets:
        - "{{ collector_address | ipwrap }}:{{ collector_port }}"

{% for host in telegraf_targets %}
  - job_name: "{{host}}"
    static_configs:
      - targets:
      # metrics path defaults to /metrics
        - "{{ host | ipwrap }}:30003"
        - "{{ host | ipwrap }}:30008"
        - "{{ host | ipwrap }}:3003"
        - "{{ host | ipwrap }}:9090"
        - "{{ host | ipwrap }}:{{ telegraf_port }}"
{% endfor %}
